<h1>Задание</h1>
Разработайте сервис для анализа финансовых транзакций в режиме реального времени с компонентной архитектурой правил обнаружения мошенничества, поддержкой различных алгоритмов обработки и мониторингом.

*** 

Нужен единый сервис с модульной внутренней архитектурой, в котором легко:

* Настроить новые правила (threshold, pattern, composite),
* Просматривать и изменять их через минимальный серверный UI,
* Видеть журнал всех операций с correlation ID,
* Получать уведомления о подозрительных операциях.
 
В рамках задачи необходимо:
Реализовать в едином приложении четыре компонента:

1. Прием и очередь транзакций:
REST-endpoint для POST транзакций (JSON: amount, from, to … );
Валидация и sanitization входных данных;
Локальная очередь (in-memory или отдельная) для асинхронной обработки.

2. Движок правил. Поддержка четырех видов правил:
Threshold (например, amount > 100 000);
Pattern (серия малых транзакций за короткий период);
Composite ((amount > 50 000) AND (nighttime));
Обновление через админ-панель позволяет регулировать правила без необходимости перезапуска приложения. Модуль применяет правила по очереди и помечает транзакции

3. Отчётный модуль и уведомления:
Сбор результатов анализа в БД;
Формирование агрегированной статистики (количество processed, alerted, reviewed);
Автоматическая отправка уведомлений в настраиваемые источники(Email, Webhook, Telegram).

4. Админ-панель (обязательно, минимальный объем):
Просмотр деталей транзакции (статусы, история обработки, correlation ID и структурированные логи);
Управление правилами обнаружения (создание, редактирование, включение/отключение, удаление) с сохранением истории изменений;
Экспорт текущих данных в CSV по кнопке.
Интерфейс может быть реализован простым серверным шаблонизатором или встроенной админ-панелью фреймворка (например, Django Admin), без отдельных фронтенд фреймворков и отдельного фронтенд-специалиста.

 

<h1>Критерии оценки</h1>

1. Работа API и очереди (30 баллов):
REST-эндпоинт для приема транзакций методом POST с JSON-схемой: amount, from, to, … ; корректные HTTP-коды и подробные сообщения об ошибках при валидации
Валидация: amount > 0; from/to - строковые идентификаторы допустимого формата; timestamp - валиден и не «из будущего»; type - из допустимого списка; защита от дубликатов по id/correlation ID
Асинхронная обработка: постановка в очередь (in-memory или отдельная), воркеры с конфигурируемой конкурентностью, контроль повторной обработки, гарантия отсутствия потерь сообщений при перезапуске
Идемпотентность и трассируемость: correlation ID проходит через все этапы (прием → очередь → обработка → результат), доступен в логах и в карточке транзакции в админ-панели

2. Логика правил (30 баллов): Поддержка типов правил:
Threshold: сравнение числовых полей (операторы ≥, >, ≤, <, =, !=), настраиваемые поля и пороги
Pattern: выявление серий операций по окну времени/количеству/агрегатам (например, N мелких переводов за T минут)
Composite: булевы комбинации условий (AND/OR/NOT), группировки и приоритеты
Применение: детерминированный порядок исполнения (по приоритету/времени создания), возможность короткого замыкания по критичности, запись причин срабатывания (какие условия/фичи вызвали ALERT)
Конфигурация: валидатор синтаксиса правил при сохранении, превью/тестирование правила на исторической выборке через админ-панель

3. Логирование и уведомления (20 баллов): Логи: структурированный JSON, уровни (INFO/WARN/ERROR), correlation ID, метки компонента (ingest/queue/rules/notify), события: прием, валидация, постановка в очередь, начало/конец обработки, сработавшие правила, отправка уведомлений, ошибки
Уведомления: минимум два канала из списка (Telegram, Email, Webhook, SMS), настраиваемые шаблоны (id транзакции, счет, сумма, время, список сработавших правил, вероятность ML, ссылка на карточку транзакции), retry/дедупликация, маршрутизация по уровню критичности.
Observability: метрики по количеству ALERT/ERROR, времени доставки уведомлений, доле успехов/ошибок, трейсинг цепочки обработки алерта (при наличии).

4. Админ-панель и отчёты (20 баллов):Управление правилами: создание, редактирование, включение/отключение и удаление с сохранением истории изменений
Транзакции: таблица последних операций с фильтрацией и пагинацией, карточка транзакции с деталями (статусы, история обработки, correlation ID и структурированные логи)
Статистика и метрики:
Отображение ключевых показателей (количество обработанных, помеченных и проверенных транзакций) за выбранный период в табличном и графическом виде
Экспорт в CSV: кнопка для скачивания агрегированных и сырых данных текущего вида.